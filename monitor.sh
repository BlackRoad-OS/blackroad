#!/bin/bash

bar() {
  local pct=$1
  local w=20
  local filled=$((pct * w / 100))
  local empty=$((w - filled))
  printf '['
  for ((i=0; i<filled; i++)); do printf '█'; done
  for ((i=0; i<empty; i++)); do printf '░'; done
  printf ']'
}

while true; do
  clear
  echo -e "\033[1;35m┌────────────────────────────────────────────────────────────────┐\033[0m"
  echo -e "\033[1;35m│\033[0m  \033[1;37mBLACKROAD OS · SYSTEM MONITOR\033[0m              $(date +%H:%M:%S)    \033[1;35m│\033[0m"
  echo -e "\033[1;35m├────────────────────────────────────────────────────────────────┤\033[0m"
  
  cpu=$((RANDOM % 40 + 10))
  mem=$((RANDOM % 30 + 40))
  net=$((RANDOM % 60 + 20))
  
  echo -e "\033[1;35m│\033[0m                                                                \033[1;35m│\033[0m"
  echo -e "\033[1;35m│\033[0m  \033[1;37mCPU\033[0m   $(bar $cpu) \033[1;36m$cpu%\033[0m                       \033[1;35m│\033[0m"
  echo -e "\033[1;35m│\033[0m  \033[1;37mMEM\033[0m   $(bar $mem) \033[1;36m$mem%\033[0m                       \033[1;35m│\033[0m"
  echo -e "\033[1;35m│\033[0m  \033[1;37mNET\033[0m   $(bar $net) \033[1;36m$net%\033[0m                       \033[1;35m│\033[0m"
  echo -e "\033[1;35m│\033[0m                                                                \033[1;35m│\033[0m"
  echo -e "\033[1;35m├────────────────────────────────────────────────────────────────┤\033[0m"
  echo -e "\033[1;35m│\033[0m  \033[1;37mAGENT LOAD\033[0m                                                   \033[1;35m│\033[0m"
  echo -e "\033[1;35m│\033[0m  \033[1;31m▸\033[0m LUCIDIA  ████████░░░░  \033[1;32m▸\033[0m OCTAVIA ██████░░░░░░       \033[1;35m│\033[0m"
  echo -e "\033[1;35m│\033[0m  \033[1;36m▸\033[0m ALICE    ██████████░░  \033[1;33m▸\033[0m PRISM   ████░░░░░░░░       \033[1;35m│\033[0m"
  echo -e "\033[1;35m│\033[0m  \033[1;35m▸\033[0m ECHO     ███░░░░░░░░░  \033[1;34m▸\033[0m CIPHER  ███████████░       \033[1;35m│\033[0m"
  echo -e "\033[1;35m│\033[0m                                                                \033[1;35m│\033[0m"
  echo -e "\033[1;35m├────────────────────────────────────────────────────────────────┤\033[0m"
  echo -e "\033[1;35m│\033[0m  \033[2mMessages: $((RANDOM % 100 + 200))/s   Tasks: $((RANDOM % 50))   Errors: 0\033[0m               \033[1;35m│\033[0m"
  echo -e "\033[1;35m└────────────────────────────────────────────────────────────────┘\033[0m"
  
  sleep 1
done
